(function(){var t=function(t,i){return function(){return t.apply(i,arguments)}},i=[].indexOf||function(t){for(var i=0,s=this.length;s>i;i++)if(i in this&&this[i]===t)return i;return-1};!function(s){var e;return s.fn.pagination=function(t){return this.each(function(){return new e(s(this),t).render()})},e=function(){function e(i,e){var n;this.el=i,this.change=t(this.change,this),this.clicked=t(this.clicked,this),this.isValidPage=t(this.isValidPage,this),this.render=t(this.render,this),this.pages=t(this.pages,this),this.buildLink=t(this.buildLink,this),this.buildLi=t(this.buildLi,this),this.buildLinks=t(this.buildLinks,this),n={current_page:1,total_pages:1,next:"&gt;",prev:"&lt;",first:!1,last:!1,display_max:8,ignore_single_page:!0,no_turbolink:!1},this.settings=s.extend(n,e),s(document).on?s(this.el).on("click","a",this.clicked):s("a",this.el).live("click",this.clicked),this.el.data("paginationView",this)}return e.prototype.buildLinks=function(){var t,i,s,e,n,a;for(t=this.settings.current_page,i=[],this.settings.first&&i.push(this.buildLi(1,this.settings.first)),this.settings.prev&&i.push(this.buildLi(t-1,this.settings.prev)),a=this.pages(),e=0,n=a.length;n>e;e++)s=a[e],i.push(this.buildLi(s,s));return this.settings.next&&i.push(this.buildLi(t+1,this.settings.next)),this.settings.last&&i.push(this.buildLi(this.settings.total_pages,this.settings.last)),i},e.prototype.buildLi=function(t,i){return null==i&&(i=t),"<li>"+this.buildLink(t,i)+"</li>"},e.prototype.buildLink=function(t,i){var s;return null==i&&(i=t),s=this.settings.no_turbolink?" data-no-turbolink='1'":"","<a href='#' data-page='"+t+"'"+s+">"+i+"</a>"},e.prototype.pages=function(){var t,e,n,a,h,l,r,u,g,o,p,d,c,f,b;if(l=this.settings.total_pages,e=this.settings.current_page,h=[],n=this.settings.display_max,l>10){if(h.push(1),e>n-1&&h.push(".."),e===l)for(a=r=d=l-n;l>=d?l>=r:r>=l;a=l>=d?++r:--r)h.push(a);if(n-1>l-e)for(a=u=c=l-n;l>=c?l>=u:u>=l;a=l>=c?++u:--u)h.push(a);else if(e>n-1)for(t=n/2,a=g=f=e-t,b=e+t;b>=f?b>=g:g>=b;a=b>=f?++g:--g)h.push(a);else if(n-1>=e)for(a=o=2;n>=2?n>=o:o>=n;a=n>=2?++o:--o)h.push(a);h=s.grep(h,function(t,i){return s.inArray(t,h)===i}),i.call(h,l)<0&&(n-1>l-e||h.push(".."),h.push(l))}else for(a=p=1;l>=1?l>=p:p>=l;a=l>=1?++p:--p)h.push(a);return h},e.prototype.render=function(){var t,i,e,n,a;if(this.el.html(""),1!==this.settings.total_pages||!this.settings.ignore_single_page){for(t=["<div class='jquery-bootstrap-pagination'>"],t.push("<ul class='pagination'>"),a=this.buildLinks(),e=0,n=a.length;n>e;e++)i=a[e],t.push(i);return t.push("</ul>"),t.push("</div>"),this.el.html(t.join("\n")),s("[data-page="+this.settings.current_page+"]",this.el).closest("li").addClass("active"),s("[data-page='..']",this.el).closest("li").addClass("disabled"),s("[data-page='0']",this.el).closest("li").addClass("disabled"),s("[data-page='"+(this.settings.total_pages+1)+"']",this.el).closest("li").addClass("disabled"),1===this.settings.current_page&&this.settings.first&&s("li:first",this.el).removeClass("active").addClass("disabled"),this.settings.current_page===this.settings.total_pages&&this.settings.last?s("li:last",this.el).removeClass("active").addClass("disabled"):void 0}},e.prototype.isValidPage=function(t){return t>0&&t!==this.settings.current_page&&t<=this.settings.total_pages},e.prototype.clicked=function(t){var i;return i=parseInt(s(t.target).attr("data-page")),this.isValidPage(i)?(null!=this.settings.callback&&this.settings.callback(t,i),this.change(i)):void 0},e.prototype.change=function(t){return t=parseInt(t),this.isValidPage(t)?(this.settings.current_page=t,this.render()):void 0},e}()}(jQuery)}).call(this);